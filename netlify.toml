[build]
  # Inject Supabase credentials from Netlify environment variables into index.html at deploy time.
  # Set SUPABASE_URL and SUPABASE_KEY in: Netlify Dashboard → Site → Environment variables
  command = "{ [ -n \"${SUPABASE_URL}\" ] || { echo 'ERROR: SUPABASE_URL is not set'; exit 1; }; } && { [ -n \"${SUPABASE_KEY}\" ] || { echo 'ERROR: SUPABASE_KEY is not set'; exit 1; }; } && sed -i \"s|%%SUPABASE_URL%%|${SUPABASE_URL}|g; s|%%SUPABASE_KEY%%|${SUPABASE_KEY}|g\" index.html"
  publish = "."

[build.environment]
  # index.html intentionally contains injected secrets after the build command runs.
  # Skip secrets scanning for this file to prevent a false-positive build failure.
  SECRETS_SCAN_OMIT_PATHS = "index.html"

[functions."keep-alive"]
  # Run once a day to prevent the Supabase free-tier project from pausing.
  # SUPABASE_URL and SUPABASE_KEY are read from Netlify environment variables at runtime.
  schedule = "@daily"
